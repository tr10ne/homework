!function(){"use strict";var n,t,e,o,i={94:function(n,t,e){e.a(n,(async function(n,t){try{var o=e(620),i=e(653),r=e(176),c=e(709),s=e(574);const n=document.getElementById("login-form"),a=document.querySelector(".login-page"),u=document.querySelector(".page"),f=document.getElementById("task-form");n.addEventListener("submit",(async t=>{t.preventDefault(),await(0,o.W)(n),await(0,i.i)(n,a,u)})),f.addEventListener("submit",(async n=>{n.preventDefault();const t=c.N.key;await(0,s.X)(f,t)})),await(0,r.r)(a,u),t()}catch(n){t(n)}}),1)},620:function(n,t,e){e.d(t,{W:function(){return c}});var o=e(551),i=e(433),r=e(709);async function c(n){const t={login:n.login.value,pass:n.password.value,tasks:[{id:"",title:"",date:"",solved:""}]};try{const e=await(0,o.C3)();if(null===e){await(0,o.nu)(t),(0,i.D)(`${t.login} зарегистрирован, как новый пользователь`,"success");const n=(await(0,o.C3)()).find((n=>n.login===t.login&&n.pass===t.pass));(0,r.l)(n.key)}else{if(e.some((n=>n.login===t.login&&n.pass===t.pass))){const n=e.find((n=>n.login===t.login&&n.pass===t.pass));throw(0,r.l)(n.key),(0,i.D)(`Здравствуйте, ${t.login}`,"success")}{await(0,o.nu)(t),(0,i.D)(`${t.login} зарегистрирован, как новый пользователь`,"success");const n=await(0,o.C3)();console.log(n);const e=n.find((n=>n.login===t.login&&n.pass===t.pass));console.log(e),(0,r.l)(e.key),console.log(e.key)}}n.reset()}catch(n){console.error(n)}}},551:function(n,t,e){e.d(t,{C3:function(){return i},_o:function(){return c},nu:function(){return r}});const o="https://to-do-list-a173f-default-rtdb.firebaseio.com";async function i(){try{const n=await fetch(`${o}/users.json`);if(200!==n.status)throw new Error("Проблемы с доступом к базе данных. Код ответа: "+n.status);const t=await n.json();return Object.keys(t).map((n=>({...t[n],key:n})))}catch(n){return console.error("Ошибка",n),null}}async function r(n){fetch(`${o}/users.json`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})}async function c(n,t){fetch(`${o}/users/${t}/tasks`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})}},653:function(n,t,e){async function o(n,t,e){t.style.display="none",e.style.display="flex",n.reset()}e.d(t,{i:function(){return o}})},176:function(n,t,e){e.d(t,{r:function(){return r}});var o=e(433),i=e(709);async function r(n,t){document.getElementById("logout-btn").addEventListener("click",(()=>{n.style.display="flex",t.style.display="none",(0,o.D)("До новых встреч!"),(0,i.l)("")}))}},433:function(n,t,e){function o(n,t){const e=document.getElementById("notification-container"),o=document.createElement("div");o.className=`notification ${t}`,o.innerText=n,e.appendChild(o),requestAnimationFrame((()=>{o.classList.add("show")})),setTimeout((()=>{o.classList.remove("show"),o.addEventListener("transitionend",(()=>{o.remove()}))}),3e3)}e.d(t,{D:function(){return o}})},574:function(n,t,e){e.d(t,{X:function(){return i}});var o=e(551);async function i(n,t){const e=(await(0,o.C3)()).find((n=>n.key===t));console.log(e);const i={id:Date.now().toString(),title:n["task-title"].value,date:n["task-date"].value,solved:"no"};console.log(i),(0,o._o)(i,t)}},709:function(n,t,e){e.d(t,{N:function(){return o},l:function(){return i}});const o={key:""};function i(n){return o.key=n}}},r={};function c(n){var t=r[n];if(void 0!==t)return t.exports;var e=r[n]={exports:{}};return i[n](e,e.exports,c),e.exports}n="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",e="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",o=function(n){n&&n.d<1&&(n.d=1,n.forEach((function(n){n.r--})),n.forEach((function(n){n.r--?n.r++:n()})))},c.a=function(i,r,c){var s;c&&((s=[]).d=-1);var a,u,f,l=new Set,d=i.exports,y=new Promise((function(n,t){f=t,u=n}));y[t]=d,y[n]=function(n){s&&n(s),l.forEach(n),y.catch((function(){}))},i.exports=y,r((function(i){var r;a=function(i){return i.map((function(i){if(null!==i&&"object"==typeof i){if(i[n])return i;if(i.then){var r=[];r.d=0,i.then((function(n){c[t]=n,o(r)}),(function(n){c[e]=n,o(r)}));var c={};return c[n]=function(n){n(r)},c}}var s={};return s[n]=function(){},s[t]=i,s}))}(i);var c=function(){return a.map((function(n){if(n[e])throw n[e];return n[t]}))},u=new Promise((function(t){(r=function(){t(c)}).r=0;var e=function(n){n!==s&&!l.has(n)&&(l.add(n),n&&!n.d&&(r.r++,n.push(r)))};a.map((function(t){t[n](e)}))}));return r.r?u:c()}),(function(n){n?f(y[e]=n):u(d),o(s)})),s&&s.d<0&&(s.d=0)},c.d=function(n,t){for(var e in t)c.o(t,e)&&!c.o(n,e)&&Object.defineProperty(n,e,{enumerable:!0,get:t[e]})},c.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},c(94)}();